layui.define(["jquery"],function(o){var m=layui.jquery,a="dropdown-open",d="dropdown-no-scroll",i="dropdown-menu-shade",n="dropdown-menu",r="dropdown-menu-nav",s="dropdown-hover",c="fixed",l=["bottom-left","bottom-right","bottom-center","top-left","top-right","top-center","left-top","left-bottom","left-center","right-top","right-bottom","right-center"];layui.link(layui.cache.base+"dropdown/dropdown.css");var p={init:function(){var t,e;m(document).off("click.dropdown").on("click.dropdown","."+n+">*:first-child",function(o){var t=m(this).parent();t.hasClass(s)||(t.hasClass(a)?t.removeClass(a):p.show(m(this).parent().find("."+r))),o.stopPropagation()}),m(document).off("click.dropHide").on("click.dropHide",function(o){p.hideAll()}),m(document).off("click.dropNav").on("click.dropNav","."+r,function(o){o.stopPropagation()}),m(document).off("mouseenter.dropdown").on("mouseenter.dropdown","."+n+"."+s,function(o){e&&e==o.currentTarget&&clearTimeout(t),p.show(m(this).find("."+r))}),m(document).off("mouseleave.dropdown").on("mouseleave.dropdown","."+n+"."+s,function(o){e=o.currentTarget,t=setTimeout(function(){m(o.currentTarget).removeClass(a)},300)}),m(document).off("click.dropStand").on("click.dropStand","[data-dropdown]",function(o){p.showFixed(m(this)),o.stopPropagation()})},openClickNavClose:function(){m(document).off("click.dropNavA").on("click.dropNavA","."+r+">li>a",function(o){p.hideAll(),m(this).parentsUntil("."+n).parent().removeClass(a),o.stopPropagation()})},hideAll:function(){m("."+n).removeClass(a),m("."+r+"."+c).addClass("layui-hide"),m("."+i).remove(),m("body").removeClass(d),m(".dropdown-fixParent").removeClass("dropdown-fixParent"),m("[data-dropdown]").removeClass(a)},show:function(o){if(o&&0<o.length&&!o.hasClass("dropdown-disabled")){var t;o.addClass("layui-anim layui-anim-upbit");for(var e=0;e<l.length;e++)if(o.hasClass("dropdown-"+l[e])){t=l[e];break}return t||(o.addClass("dropdown-"+l[0]),t=l[0]),p.forCenter(o,t),o.parent("."+n).addClass(a),t}return!1},showFixed:function(o){var t,e=m(o.data("dropdown"));if(e.hasClass("layui-hide")){if(t=p.show(e)){e.addClass(c),e.removeClass("layui-hide");var n=p.getTopLeft(o,e,t);n=p.checkPosition(e,o,t,n),e.css(n),m("body").addClass(d);var r="true"==o.attr("no-shade");m("body").append('<div class="'+(r?i+" no-shade":i)+' layui-anim layui-anim-fadein"></div>'),o.parentsUntil("body").each(function(){var o=m(this).css("z-index");/[0-9]+/.test(o)&&m(this).addClass("dropdown-fixParent")}),o.addClass(a)}}else p.hideAll()},forCenter:function(o,t){if(!o.hasClass(c)){var e=o.parent().outerWidth(),n=o.parent().outerHeight(),r=o.outerWidth(),a=o.outerHeight(),d=t.split("-"),i=d[0],s=d[1];"top"!=i&&"bottom"!=i||"center"!=s||o.css("left",(e-r)/2),"left"!=i&&"right"!=i||"center"!=s||o.css("top",(n-a)/2)}},getTopLeft:function(o,t,e){var n=o.outerWidth(),r=o.outerHeight(),a=t.outerWidth(),d=t.outerHeight(),i=o.offset().top-m(document).scrollTop(),s=o.offset().left,c=s+n,l=0,p=0,u=e.split("-"),f=u[0],h=u[1];if("top"==f||"bottom"==f)switch(d+=8,h){case"left":p=s;break;case"center":p=s-a/2+n/2;break;case"right":p=c-a}if("left"==f||"right"==f)switch(a+=8,h){case"top":l=i+r-d;break;case"center":l=i-d/2+r/2;break;case"bottom":l=i}switch(f){case"top":l=i-d;break;case"right":p=s+n;break;case"bottom":l=i+r;break;case"left":p=s-a}return{top:l,left:p,right:"auto",bottom:"auto"}},checkPosition:function(o,t,e,n){var r=e.split("-");return"bottom"==r[0]?n.top+o.outerHeight()>p.getPageHeight()&&(n=p.getTopLeft(t,o,"top-"+r[1]),o.removeClass("dropdown-"+e),o.addClass("dropdown-top-"+r[1])):"top"==r[0]&&n.top<0&&(n=p.getTopLeft(t,o,"bottom-"+r[1]),o.removeClass("dropdown-"+e),o.addClass("dropdown-bottom-"+r[1])),n},getPageHeight:function(){return document.documentElement.clientHeight||document.body.clientHeight},getPageWidth:function(){return document.documentElement.clientWidth||document.body.clientWidth}};p.init(),o("dropdown",p)});