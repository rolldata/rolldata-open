layui.define(["wdUtil","admin","table","form","laydate","eleTree","notice","pscrollbar"],function(){var n=layui.jquery,d=(layui.element,layui.setter),l=(layui.device(),layui.form),e=layui.wdUtil,t=layui.pscrollbar,o=0,s=0,r=0,c=0,p=0,h=0,f=0,m=[d.basePath+"static/images/console/xtgl.png",d.basePath+"static/images/console/sjjm.png",d.basePath+"static/images/console/sjsb.png",d.basePath+"static/images/console/sjjgc.png",d.basePath+"static/images/console/pzcl.png",d.basePath+"static/images/console/pzcl.png"];function a(){var a=d.basePath+"functionController/queryUserAvailableConsole";e.send(a,{parentId:""},function(a){if(a){var e=n(".DSwrap"),t=[],i=[];a.obj.treeNodes&&a.obj.treeNodes.length&&(layui.sessionData("userAvailable1",{key:"navs1",value:a.obj.treeNodes}),a.obj.treeNodes.forEach(function(a,e){t.push('<div class="cols"><img src="'+m[e]+'"/><p>'+a.name+'</p> <div class="colsdiv"></div></div>')}),e.html(t.join("")),a.obj.treeNodes.forEach(function(a,e){if(i=[],n(".cols p").eq(e).text()==a.name){if(null!=a.children&&0<a.children.length)for(var t=0;t<a.children.length;t++)i.push('<div class="clickdiv" data-type="'+a.children[t].hrefType+'" data-path="'+a.children[t].hrefLink+'" data-name="'+a.children[t].name+'" data-funcid="'+a.children[t].funcId+'" data-id="'+a.children[t].id+'"><div class="divtext">'+a.children[t].name+"</div></div>");n(".cols .colsdiv").eq(e).html(i)}})),l.verify({positiveNumber:function(a){return/^\d+$/.test(a)?0==a?"不能为0":void 0:"不能为空或负数"}}),n(".clickdiv").off("click").on("click",function(){var a=n(this),e=(n("clickdiv"),a.attr("data-path"));if("4028b88169d695860169d6975a8f0020"==a.attr("data-id"))o+=1,window.open(d.basePath+"biController/viewVisualization?cid=&id=0&pid=0&type=0&name=驾驶舱"+o);else if("4028b88169d695860169d6975a8f0021"==a.attr("data-id"))s+=1,window.open(d.basePath+"biController/viewMobileVisualization?cid=&id=0&pid=0&type=4&name=移动端"+s);else if("4028b88169d695860169d6975a8f0022"==a.attr("data-id"))r+=1,window.open(d.basePath+"biController/viewBigScreenVisualization?cid=&id=0&pid=0&type=5&name=大屏"+r);else if("4028b88169d695860169d6975a8f0023"==a.attr("data-id"))c+=1,window.open(d.basePath+"dataReportController/dataReportList_new?row=10&col=10&type=1&name=报表"+c);else if("4028b88169d695860169d6975a8f0030"==a.attr("data-id"))p+=1,window.open(d.basePath+"simpleDataReportController/simpleDataReportList?type=1&name=简易报表"+p);else if("4028b88169d695860169d6975a8f0031"==a.attr("data-id"))h+=1,window.open(d.basePath+"dataReportController/dataReportGroupList?name=报表组"+h);else if("4028b88169d695860169d6975a8f0032"==a.attr("data-id"))f+=1,window.open(d.basePath+"multidimensionalController/design?name=多维报表"+f);else{var t=-1<e.indexOf("http:")?e+"?navname="+a.attr("data-name"):d.basePath+e+"?navname="+a.attr("data-name");top.layui.index.loadView({menuId:t,menuPath:t,menuName:a.attr("data-name")})}})}})}a(),n(".weatherWrap").each(function(a,e){n(e).hasClass("ps")||new t(e)})});